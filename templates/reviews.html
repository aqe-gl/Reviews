{% extends "base.html" %}
{% load static %}

{% block content %}
    <div class="header-container">
        <h1><span class="material-icons">reviews</span> Customer Reviews</h1>
        <p class="subtitle">Share your experience and read what others have to say</p>
    </div>

    <div class="review-form">
        <h2><span class="material-icons">edit</span> Leave a Review</h2>
        <form method="POST" class="material-form">
            {% csrf_token %}
            <div class="form-group">
                {{ form.name }}
                <label for="{{ form.name.id_for_label }}">Your Name</label>
            </div>
            <div class="form-group">
                {{ form.email }}
                <label for="{{ form.email.id_for_label }}">Email Address</label>
            </div>
            <div class="form-group">
                {{ form.review }}
                <label for="{{ form.review.id_for_label }}">Your Review</label>
            </div>
            <div class="form-group">
                {{ form.rating }}
                <label for="{{ form.rating.id_for_label }}">Rating (1-10)</label>
            </div>
            <p>
                <input type="submit" value="Submit Review">
            </p>
        </form>
    </div>

    <div class="reviews">
        <h2><span class="material-icons">format_quote</span> All Reviews</h2>
        {% for review in reviews %}
            <div class="review-item">
                <div class="review-header">
                    <div class="user-info">
                        <span class="material-icons">person</span>
                        <p class="user">
                            <strong>{{ review.name }}</strong>
                            <em>{{ review.email }}</em>
                        </p>
                    </div>
                    <div class="ratings">
                        {{ review.rating }} / 10
                        <div class="star-rating">
                            {% for i in "1234567890"|slice:review.rating %}
                                <span class="material-icons">star</span>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <p class="review-text">
                    {{ review.review }}
                </p>
                <div class="review-footer">
                    <span class="review-date">{{ review.created_at|date:"F d, Y" }}</span>
                </div>
            </div>
        {% empty %}
            <div class="empty-state">
                <span class="material-icons">sentiment_dissatisfied</span>
                <p>No reviews yet. Be the first to leave one!</p>
            </div>
        {% endfor %}
    </div>
{% endblock %}